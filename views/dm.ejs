<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DM - Aloduna</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header>
    <div class="header-content">
      <h1>Aloduna</h1>
      <nav>
        <a href="/">Ana Sayfa</a>
        <button id="theme-toggle">Tema DeÄŸiÅŸtir</button>
      </nav>
    </div>
  </header>

  <main>
    <section class="dm-container">
      <div class="dm-list">
        <h3>ArkadaÅŸlar</h3>
        <ul>
          <% friends.forEach(friend => { %>
            <li><a href="#chat-<%= friend.id %>"><%= friend.username %></a></li>
          <% }); %>
        </ul>
      </div>
      <div class="dm-chat">
        <div class="dm-messages" id="messages">
          <!-- Mesajlar burada yÃ¼klenecek -->
        </div>
        <div class="dm-input">
          <form action="/dm/send" method="POST">
            <input type="hidden" name="receiverId" id="receiverId">
            <input type="text" name="content" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..." required>
            <button type="submit">GÃ¶nder</button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Aloduna. <a href="/legal/gizlilik-politikasi">Gizlilik PolitikasÄ±</a> | <a href="/legal/kullanici-sozlesmesi">KullanÄ±cÄ± SÃ¶zleÅŸmesi</a> | <a href="/legal/topluluk-kurallari">Topluluk KurallarÄ±</a></p>
    <div class="footer-flag">ğŸ‡¹ğŸ‡·</div>
  </footer>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/theme.js"></script>
  <script>
    const socket = io();
    socket.on('newDM', (data) => {
      // Yeni mesajÄ± ekle
      const messages = document.getElementById('messages');
      const msgDiv = document.createElement('div');
      msgDiv.textContent = data.content;
      messages.appendChild(msgDiv);
    });
  </script>
</body>
</html>